<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/styles.css" type="text/css">
    <link rel="stylesheet" href="css/sign-up.css" type="text/css">
    <script defer src="js/login.js" type="text/js"></script>
    <title>Login</title>
</head>
<body>

    <div class="shop-section">
        <div class="login-container">
            <video class="number-nine-video login-video" autoplay loop muted>
                <source src="images/videos/signup_video.mp4" type="video/mp4">
            </video>
            <div class="action-container login-container">
                <!-- <h2>Sign up for amazing content</h2> -->
                <form id="loginForm">

                    <label for="email"><p>Email:</p> <input type="email" name="email" id="email" required></label>
                    <label for="email"><p>Password:</p> <input type="password" name="password" id="password" required></label>
                    <button type="submit" class="sign-up">Log in</button>
                </form>
            
            </div>
        </div>
    </div>


    
</body>

    <script>


        const form = document.getElementById('loginForm');

        async function sendData(){

            const formData = new FormData(form);

            try{

                const response = await fetch('http://localhost:3000/login', {
                    method: 'POST',
                    body: formData,
                });


                if (response.ok){
                    alert('Status: Logged-in')
                    window.location.href = '/'
                }else if(response.status === 401){
                    alert(`Email address not found/ Incorrect password`)
                }
                else{
                    // console.log('ERROR BELOW')
                    console.error(response.status);
                    alert('FAILED TO SUBMIT')
                }

                const responseData = await response.json
                console.log(responseData)
            }catch(e){console.error(e)}
            }

        form.addEventListener('submit', (e) => {
            e.preventDefault()
            sendData()
        })

    </script>


</html>